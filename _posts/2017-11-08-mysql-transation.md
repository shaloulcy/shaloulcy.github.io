---
layout: post 
author: shalou
title:  "mysql事务" 
category: linux
tag: [mysql, 事务]
---

事务具有ACID四种特性

* 原子性(atomicity)：一个事务包含多个操作，这些操作要么全都成功，要不全部失败回滚
* 一致性(consistency)：数据库总是从一个一致性状态切换到另一个一致性状态
* 隔离性(isolation)：其实说的就是事务之间相互不影响
* 持久性(durability)：一旦事务提交，则其修改永久保存在数据库

其中数据库事务的isolation可能引发如下问题

* 脏读：允许读到未提交的脏数据
* 不可重复读：在一次事务中，两次读取到不同的数据
* 幻读：一个事务查询数据，如果另一个事务更新并提交了新的数据，这时第一个事务更新数据时，如插入新纪录，会导致失败

其中不可重复读主要针对单行数据，而幻读针对多行数据

假如mysql以innodb作为存储引擎，则定义了以下事务级别

* 读未提交(read uncommitted)，最低级别，脏读、不可重复读、幻读都未解决
* 已提交读(read committed)，只解决了脏读
* 可重复读(repeatable read)，解决了脏读和不可重复读
* 可序列化(serializable)，都解决了

其中repeatable read是默认级别 

数据库范式：

第一范式：解决原子性，即属性不可再分
第二范式：解决了非主属性对主码的部分依赖
第三范式：解决了非主属性对码的传递依赖
BCNF范式：消除主属性对码的部分和传递依赖
